--- gprolog-1.3.0/src/Ma2Asm/ix86_any.c.noexecstack	2007-01-04 11:35:14.000000000 +0100
+++ gprolog-1.3.0/src/Ma2Asm/ix86_any.c	2009-10-05 07:05:43.000000000 +0200
@@ -330,6 +330,9 @@
 void
 Code_Stop(void)
 {
+  Label_Printf("#ifdef __ELF__");
+  Label_Printf(".section .note.GNU-stack,\"\",@progbits");
+  Label_Printf("#endif");
 }
 
 
--- gprolog-1.3.0/src/Ma2Asm/powerpc_any.c.noexecstack	2007-01-04 11:35:14.000000000 +0100
+++ gprolog-1.3.0/src/Ma2Asm/powerpc_any.c	2009-10-05 07:05:43.000000000 +0200
@@ -219,6 +219,11 @@
 void
 Code_Stop(void)
 {
+#ifndef M_powerpc_darwin
+  Label_Printf("#ifdef __ELF__");
+  Label_Printf(".section .note.GNU-stack,\"\",@progbits");
+  Label_Printf("#endif");
+#endif
 }
 
 
